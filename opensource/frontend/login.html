<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DigitalPlat Domain Dashboard Login</title>
    {% include "ga.html" %}
    <link rel="icon" type="image/jpeg" href="/static/img/logo.jpg">
    <script src="https://cdn.tailwindcss.com"></script>
    {% include "partials/modern_styles.html" %}
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js?compat=recaptcha" async defer></script>

    <style>
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
<div class="page-shell">
    <main class="flex-1 flex items-center justify-center px-6 py-10">
        <div class="w-full max-w-md card p-8 space-y-6">
            <div class="flex items-center space-x-4">
                <img src="/static/img/logo.jpg" alt="Logo" class="brand-mark">
                <div>
                    <p class="text-xs uppercase tracking-[0.3em] text-slate-400">Welcome back</p>
                    <h1 class="text-xl font-semibold text-slate-900">DigitalPlat Domain Dashboard</h1>
                    <p class="text-sm text-slate-500">Sign in to manage your domains.</p>
                </div>
            </div>

            <form id="loginForm" action="/auth/login" method="POST" class="space-y-6">
                <div id="step1" class="grid gap-y-4 fade-in">
                    <div class="rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600">
                        {{notice | safe}}
                    </div>
                    <div>
                        <label class="block text-xs uppercase tracking-wide text-slate-400 mb-2">E-Mail</label>
                        <input type="email" name="email" id="email" required class="input-field" placeholder="you@example.com">
                    </div>
                    <button type="button" onclick="nextStep()" class="btn-primary w-full">Next</button>
                </div>

                <div id="step2" class="hidden opacity-0 grid gap-y-4 fade-in">
                    <div class="flex items-center space-x-3 rounded-xl border border-slate-200 bg-white px-4 py-3">
                        <span class="material-symbols-outlined text-slate-400 text-4xl">account_circle</span>
                        <p id="displayEmail" class="flex-grow text-slate-700"></p>
                        <button type="button" onclick="editEmail()" class="text-sm font-medium text-slate-600 hover:text-slate-900">Edit</button>
                    </div>
                    <div>
                        <label class="block text-xs uppercase tracking-wide text-slate-400 mb-2">Password</label>
                        <input type="password" name="password" id="password" required class="input-field" placeholder="Your password">
                    </div>
                    <div class="g-recaptcha mb-2" data-sitekey="0x4AAAAAAAxuMrGCYFcOwd1N"></div>
                    <button type="submit" class="btn-primary w-full">Login</button>
                </div>

                <div class="text-center text-sm text-slate-500 space-y-1">
                    <p>Don't have an account? <a href="/auth/register" class="font-medium text-slate-900 hover:underline">Sign up</a></p>
                    <p>Forgot password? <a href="/auth/reset-password" class="font-medium text-slate-900 hover:underline">Reset Password</a></p>
                </div>
            </form>

            <div class="text-center">
                <a class="mt-4 inline-flex items-center justify-center w-full border border-slate-200 bg-white text-slate-700 py-3 rounded-xl hover:bg-slate-50 transition" href="/auth/login/google">
                    <img src="/static/img/login/glogo.webp" class="w-5 h-5 mr-3" alt="Google"> Sign in with Google
                </a>
            </div>

            <footer class="text-center text-xs text-slate-400 space-y-2">
                <p>
                    By continuing you agree to our
                    <a href="https://nic.us.kg/terms-of-service/" class="text-slate-600 hover:text-slate-900">Terms</a>,
                    <a href="https://nic.us.kg/privacy-policy/" class="text-slate-600 hover:text-slate-900">Privacy</a>, and
                    <a href="https://nic.us.kg/acceptable-use-policy/" class="text-slate-600 hover:text-slate-900">AUP</a>.
                </p>
                <p>Issues? <a href="https://github.com/DigitalPlatDev/US.KG-Issues/issues/new/choose" class="text-slate-600 hover:text-slate-900">Report here</a></p>
                <button type="button" class="inline-flex items-center space-x-2 text-slate-500 hover:text-slate-900" data-cc="show-preferencesModal">
                    <img src="/static/img/privacyoptions.svg" alt="Privacy Icon" class="w-6 h-6">
                    <span>Do Not Share My Personal Information</span>
                </button>
            </footer>
        </div>
    </main>
</div>

<script>
function nextStep() {
    const email = document.getElementById('email').value;
    if (email) {
        document.getElementById('step1').classList.add('hidden');
        const step2 = document.getElementById('step2');
        document.getElementById('displayEmail').innerText = email;
        step2.classList.remove('hidden');
        setTimeout(() => step2.classList.add('opacity-100'), 100);
    }
}

function editEmail() {
    document.getElementById('step2').classList.add('hidden');
    document.getElementById('step1').classList.remove('hidden');
}

document.getElementById('email').addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
        event.preventDefault();
        nextStep();
    }
});
</script>
</body>
</html>
